@model IEnumerable<SmartLinks.Models.TechVideoVM>

@{
    ViewBag.Title = "TechnicalVideo";
    Layout = "~/Views/Shared/_Layout4Video.cshtml";
}

<div class="row">
    <div class="nav navbar-nav navbar-left">
        <img src="~/Content/images/ILearnIcons.png" style="height:40px; width:40px">
    </div>
    <div class="nav navbar-nav navbar-left">
        <ol class="breadcrumb" style="width:600px">
            <li class="active"><a href="~/TVideoSite/TechnicalVideo">Technical Video</a></li>
        </ol>
    </div>
</div>

<link href="~/Content/technicalvideo.css" rel="stylesheet" type="text/css" />
<link href="~/Content/videorecorder.css" rel="stylesheet" type="text/css" />
<script src="~/Scripts/technicalvideo.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        TechVideo.Init();
    })
</script>

<div class="Tvideo-container row">

    <div class="col-sm-3 item-panels" >

        <div class="item-panel-toolbar">
            @if (ViewBag.VideoAdmin != null && ViewBag.VideoAdmin)
            {
                <div class="add-video-btn" data-toggle="tooltip" title="Add Video">
                    <img class="toolbar-img" src="~/Content/images/add_column.png">
                </div>
            }
            <div class="search-video">
                <div class="search-input">
                    <input type="text" class="search-keywords hide" id="keywords" name="keywords" placeholder="Search for ...">
                </div>
                <div class="search-img">
                    <img class="toolbar-img" src="~/Content/images/search.png">
                </div>
            </div>
        </div>

        <hr style="margin-top:1px;margin-bottom:1px;border: 1px solid;border-color:lightgrey" />
        @foreach (var item in Model)
        {
            var panel = "item-panel";
            if (string.Compare(item.VID, ViewBag.ActiveVideo.VID) == 0)
            { panel = "item-panel-active"; }

            <div class="@panel">
                <div class="item-title">
                    <div class="item-name">@item.Updater</div>
                    <div class="item-op dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                            <span class="glyphicon glyphicon-option-vertical" title="Operations" data-toggle="tooltip"></span>
                        </a>
                        <ul class="dropdown-menu">
                            @*<li class="RemoveVideoMenu" videoid="@item.VID">
                                    <a>Delete</a>
                                </li>*@
                        </ul>
                    </div>
                </div>
                <div class="item-content" videoid="@item.VID">
                    <div class="col-xs-3">
                        <img src="@item.IPath" style="width:80px;height:80px;"/>
                    </div>
                    <div class="col-xs-9">
                        <div>
                            <div class="item-date">@item.UpdateTime</div>
                        </div>
                        <div>
                            <div>@item.VSubject</div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="col-sm-9 item-details-show">
        @if (ViewBag.ActiveVideo != null)
        {
            <div class="row" style="margin-bottom:10px;">
                <video src="@ViewBag.ActiveVideo.VPath" width='640' height='480' controls type='video/mp4'>Your browser does not support the video tag.</video>
            </div>
            
            <div class="row">
                <div class="well">
                    @ViewBag.ActiveVideo.VDescription
                </div>
            </div>
        }
    </div>
</div>

@using (Html.BeginForm("UploadTechnicalVideo", "TVideoSite", FormMethod.Post, new { enctype = "multipart/form-data", id = "uploadvideoform", name = "uploadvideoform" }))
{
<div id="add-video-modal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="modal-header" style="padding:10px;">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Upload Video</h4>
                </div>
                <div class="upload-video-container">
                    <div class="col-xs-6" >
                        <div class="row" style="margin-bottom:5px;margin-left:2%;">
                            <label>Subject</label>
                            <div class="row">
                                <input class="form-control" id="vsubject" name="vsubject" type="text" value=""/>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom:5px;margin-left:2%;">
                            <label>Description</label>
                            <div class="row">
                                <textarea class="form-control" rows="3" id="vdesc" name="vdesc" type="text"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6">  
                        <div class="row" style="text-align:center;height:100px;margin-top:20px;margin-left:20px;">
                            <span class="btn btn-default btn-file" id="choosefile3" style="padding:0px;background-color:transparent !important;border-color:transparent !important;">
                                <img src="~/Content/images/CloudUpload.png" MYTP="HOVER" style="height:100px; width:150px"> <input type="file" name="files3" id="file3" runat="server" onchange="ShowFileNames3(this)" />
                            </span>
                        </div>
                        <div class="row" style="margin-top:10px;margin-left:20px;">
                                <label class="control-label" id="showfile3" name="showfile3"></label>
                                <input class="form-control text-box single-line" value="" id="attachmentupload" name="attachmentupload" type="hidden" />
                        </div>
                        <script type="text/javascript">
                            function ShowFileNames3(oFile) {
                                $('#showfile3').text(oFile.value);
                                document.getElementById("attachmentupload").value = oFile.value;
                            }
                        </script>
                    </div>
                </div>
                <div class="upload-video-footer">
                    <div class="upload-play">
                        <img src="~/Content/images/upload.png" class="upload-video-upload upload-video-op" id="upload-upload" data-val="upload" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
}